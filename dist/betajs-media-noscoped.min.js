/*!
betajs-media - v0.0.1 - 2015-03-26
Copyright (c) Oliver Friedmann
MIT Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Media"),a.binding("base","global:BetaJS"),a.binding("jquery","global:jQuery"),a.define("module:",function(){return{guid:"8475efdb-dd7e-402e-9f50-36c76945a692",version:"4.1427414642099"}}),a.define("module:Player.Flash",["base:Flash.FlashClassRegistry","base:Flash.FlashEmbedding","base:Browser.Dom","base:Strings"],function(a,b,c,d){return{polyfill:function(a,b,d){return"video"==a.tagName.toLowerCase()&&"networkState"in a?a.networkState==a.NETWORK_NO_SOURCE||d?this.attach(c.changeTag(a,b||"videopoly")):a:this.attach(a)},__flashRegistrySingleton:function(){return this.__flashRegistry||(this.__flashRegistry=new a,this.__flashRegistry.register("flash.media.Video",["attachNetStream"]),this.__flashRegistry.register("flash.display.Sprite",["addChild"]),this.__flashRegistry.register("flash.display.Stage",[]),this.__flashRegistry.register("flash.net.NetStream",["play"]),this.__flashRegistry.register("flash.net.NetConnection",["connect"])),this.__flashRegistry},attach:function(a){for(var c=[".mp4",".flv"],e=[],f=0;f<a.childNodes.length;++f)a.childNodes[f].tagName&&"source"==a.childNodes[f].tagName.toLowerCase()&&a.childNodes[f].src&&e.push(a.childNodes[f].src.toLowerCase());var g=e[0],h=c.length-1;for(f=e.length-1;f>=0;--f)for(var i=0;h>=i;++i)if(d.ends_with(e[f],c[i])){g=e[f],h=i;break}-1==g.indexOf("://")&&(g=document.location.href+"/../"+g);var j=null,k=g;if(d.starts_with(g,"rtmp")){var l=d.splitLast(g,"/");j=l.head,k=l.tail}var m,n=new b(a,{registry:this.__flashRegistrySingleton(),wrap:!0});n.ready(function(){var b=n.flashMain(),c=b.get("stage");c.set("scaleMode","noScale"),c.set("align","TL");var d=n.newObject("flash.media.Video",c.get("stageWidth"),c.get("stageHeight"));b.addChildVoid(d);var e=n.newObject("flash.net.NetConnection");e.addEventListener("netStatus",function(){m=n.newObject("flash.net.NetStream",e),d.attachNetStreamVoid(m),a.attributes.autoplay&&a.play()}),e.connectVoid(j)}),a.play=function(){m.playVoid(k)}}}})}).call(Scoped);